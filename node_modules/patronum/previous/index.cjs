"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.previous = previous;
var _effector = require("effector");
function previous(...args) {
  const [store] = args;
  const initialValue = args.length < 2 ? null : args[1];
  if (!_effector.is.store(store, {
    sid: "mzq5dc"
  })) {
    throw Error('previous first argument should be a store');
  }
  const $prevValue = (0, _effector.createStore)(initialValue, {
    and: {
      serialize: 'ignore',
      skipVoid: false
    },
    name: "$prevValue",
    sid: "e05yob"
  });
  const storeNode = store.graphite;
  storeNode.seq.push(_effector.step.compute({
    fn(upd, _, stack) {
      (0, _effector.launch)({
        target: $prevValue,
        params: stack.a,
        defer: true
      });
      return upd;
    }
  }));
  return $prevValue;
}
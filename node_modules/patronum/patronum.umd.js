!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("effector")):"function"==typeof define&&define.amd?define(["exports","effector"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).patronum={},e.effector)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);function o(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var a=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.and=function(...e){return(0,r.default.combine)({and:[e,e=>{for(const t of e)if(!t)return!1;return!0},{skipVoid:!1}],or:{sid:"-rbm5ks"}})}})),i=o((function(e,t){function n(e){throw new Error(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.combineEvents=function(e){const t=function(e){return Object.keys(e).some((t=>!["events","reset","target"].includes(t)&&r.default.is.unit(e[t])))}(e)?{events:e}:e,{events:o,reset:a,target:i=(0,r.default.createEvent)({name:"target",sid:"p73fff"})}=t;r.default.is.unit(i)&&r.default.is.targetable(i)||n("target should be a targetable unit");a&&!r.default.is.unit(a)&&n("reset should be a unit");return(0,r.default.withRegion)(i,(()=>{const e=Object.keys(o),t=Array.isArray(o)?[...e].fill(""):{},n=(0,r.default.createStore)(e.length,{and:{serialize:"ignore"},name:"$counter",sid:"-ahoahx"}),s=(0,r.default.createStore)(t,{and:{serialize:"ignore"},name:"$results",sid:"oy8iyn"});(0,r.default.sample)({and:[{source:i,target:n.reinit}],or:{sid:"blex0c"}}),s.reset(i),a&&((0,r.default.sample)({and:[{source:a,target:n.reinit}],or:{sid:"bnm3fi"}}),s.reset(a));for(const t of e){const e=(0,r.default.createStore)(!1,{and:{serialize:"ignore"},name:"$isDone",sid:"-rf2fac"}).on(o[t],(()=>!0)).reset(i);a&&e.reset(a),n.on(e,(e=>e-1)),s.on(o[t],((e,n)=>{const r=Array.isArray(e)?[...e]:{...e};return r[t]=n,r}))}const u=(0,r.default.sample)({and:[{source:s,clock:[...Object.values(o)]}],or:{name:"eventsTrriggered",sid:"-lro8bq"}});(0,r.default.sample)({and:[{source:u,filter:n.map((e=>0===e),{skipVoid:!1}),target:i}],or:{sid:"-dlkr2s"}})})),i}})),s=o((function(e,t){function n(e){return r.default.is.unit(e)?e.map((e=>!e),{skipVoid:!1}):t=>!e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.condition=function({if:e,then:t,else:o,source:a=(0,r.default.createEvent)({name:"source",sid:"tdyoa4"})}){const i=r.default.is.unit(e)||(s=e,"function"==typeof s)?e:t=>t===e;var s;t&&o?(0,r.default.split)({and:[{source:a,match:{then:i,else:n(i)},cases:{then:t,else:o}}],or:{sid:"aaw2hr"}}):t?(0,r.default.sample)({and:[{source:a,filter:i,target:t}],or:{sid:"-dwrmbb"}}):o&&(0,r.default.sample)({and:[{source:a,filter:n(i),target:o}],or:{sid:"-dsx25s"}});return a}})),u=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(...e){var t;const n=2===e.length?{source:e[0],timeout:e[1]}:e[0],{source:o,timeout:a,target:i,name:s}=n;if(!r.default.is.unit(o))throw new TypeError("source must be unit from effector");if(r.default.is.domain(o,{sid:"jsc7s2"}))throw new TypeError("source cannot be domain");const u=function(e){if(r.default.is.store(e,{sid:"-21qm2b"}))return e;if("number"==typeof e){if(e<0||!Number.isFinite(e))throw new Error(`timeout must be positive number or zero. Received: "${e}"`);return(0,r.default.createStore)(e,{and:{name:"$timeout"},sid:"kbepy4"})}throw new TypeError(`timeout parameter in interval method should be number or Store. "${typeof e}" was passed`)}(a),d=(0,r.default.createEvent)({name:"saveCancel",sid:"-kec0n3"}),c=(0,r.default.createStore)([],{and:{serialize:"ignore"},name:"$canceller",sid:"-tfm9fg"}).on(d,((e,t)=>t)),l=null!==(t=i)&&void 0!==t?t:(0,r.default.createEvent)({name:"tick",sid:"-50e2rn"}),f=(0,r.default.attach)({and:{name:s||`debounce(${o?.shortName||o.kind}) effect`,source:c,effect:([e,t],n)=>(e&&clearTimeout(e),t&&t(),new Promise(((e,t)=>{d([setTimeout(e,n),t])})))},or:{name:"timerFx",sid:"-jwso4j"}});c.reset(f.done);const m=(0,r.default.createStore)([],{and:{serialize:"ignore",skipVoid:!1},name:"$payload",sid:"-x9cllg"}).on(o,((e,t)=>[t])),p=(0,r.default.createStore)(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"8r2952"}),y=(0,r.default.createEvent)({name:"triggerTick",sid:"-781myl"});p.on(y,(()=>!1)).on([l,u,f],(()=>!0));const g=(0,r.default.merge)([o,(0,r.default.sample)({and:[{clock:u,filter:f.pending}],or:{name:"requestTick",sid:"-khrpxp"}})],{name:"requestTick",sid:"2k0852"});return(0,r.default.sample)({and:[{clock:g,filter:p,target:y}],or:{sid:"-31h8q8"}}),(0,r.default.sample)({and:[{source:u,clock:y,target:f}],or:{sid:"-2y6h62"}}),(0,r.default.sample)({and:[{source:m,clock:f.done,fn:([e])=>e,target:l}],or:{sid:"-2jc15b"}}),l}})),d=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=o;const n={trace:!1,handler:e=>{if(g(e.node)&&"finally"===e.node.meta.named)return;const{scope:t,scopeName:n,name:r,kind:o,value:a,loc:i,trace:s,node:u,logType:d}=e,c=t?` (scope: ${n})`:"",l=null!=r?r:i?`${i.file}:${i.line}:${i.column}`:"",f="initial"===d?" [getState]":"";console.info(`[${o}]${c} ${l}${f}`,a),s&&s.length>0&&!g(u)&&(console.groupCollapsed(`[${o}]${c} ${l} trace`),s.forEach((e=>{const{name:t,kind:n,value:r,loc:o}=e,a=null!=t?t:o?`${o.file}:${o.line}:${o.column}`:"";console.info(`<- [${n}] ${a}`,r)})),console.groupEnd())}};function o(...e){const{config:t,units:o}=function(...e){let t=n;const[o,...a]=e,i=[];if(function(e){if(!r.default.is.unit(e))return!Object.values(e).every(r.default.is.unit);return!1}(o))t={...n,...o};else if(r.default.is.unit(o))i.push(o);else for(const[e,t]of Object.entries(o))v.set(b(t).id,e),i.push(t);for(const e of a)if(r.default.is.unit(e))i.push(e);else for(const[t,n]of Object.entries(e))v.set(b(n).id,t),i.push(n);return{config:t,units:i}}(...e);o.forEach((e=>{r.default.is.store(e,{sid:"-foynff"})||r.default.is.event(e,{sid:"apy28p"})||r.default.is.effect(e,{sid:"apy3od"})?i(e,t):r.default.is.domain(e,{sid:"-rsqe9t"})&&a(e,t)}))}function a(e,t){e.onCreateStore((e=>i(e,t))),e.onCreateEvent((e=>i(e,t))),e.onCreateEffect((e=>i(e,t))),e.onCreateDomain((e=>a(e,t)))}function i(e,t){r.default.is.store(e,{sid:"w7ds2s"})?(!function(e,t){if(!t.handler)throw Error("patronum/debug must have the handler");const n={logType:"initial",scope:null,scopeName:null,node:_(e),kind:h(e),value:e.getState(),name:k(e),loc:j(e),trace:[],stackMeta:{}};t.handler(n),p.forEach((n=>d(e,t,n))),l((n=>d(e,t,n)))}(e,t),s(e,t)):r.default.is.event(e,{sid:"fretyd"})?s(e,t):r.default.is.effect(e,{sid:"gpi2qr"})&&(s(e,t),s(e.finally,t),s(e.done,t),s(e.fail,t))}function s(e,t){const n=(0,r.default.createNode)({parent:[e],meta:{op:"watch"},family:{owners:e},regional:!0,node:[r.default.step.run({fn(n,r,o){var a;const i=null!==(a=o?.scope)&&void 0!==a?a:null,s={logType:"update",scope:i,scopeName:y(i),node:_(e),kind:h(e),value:n,name:k(e),loc:j(e),stackMeta:$(o.parent),trace:t.trace?u(o):[]};if(!t.handler)throw Error("patronum/debug must have the handler");t.handler(s)}})]});return()=>(0,r.default.clearNode)(n)}function u(e){const t=[];let n=e?.parent;for(;n;){const{node:e,value:r}=n,o={node:e,value:r,name:k(e),loc:j(e),kind:h(e),stackMeta:$(n)};t.push(o),n=n.parent}return t}function d(e,t,n){if(!t.handler)throw Error("patronum/debug must have the handler");const r=_(e),o={logType:"initial",scope:n,scopeName:y(n),node:r,kind:h(e),value:n.getState(e),name:k(e),loc:j(e),trace:[],stackMeta:{}};t.handler(o)}const c=new Set,l=e=>(c.add(e),()=>{c.delete(e)});let f=0;const m=new Map,p={save(e,t){p.get(e)||m.set(e,t)},get(e){var t;return e&&null!==(t=m.get(e))&&void 0!==t?t:null},delete(e){m.delete(e)},forEach(e){m.forEach(((t,n)=>e(n,t)))},clear(){m.clear()}};function y(e){if(!e)return null;const t=p.get(e);if(!t){return e._debugId||(e._debugId=(f+=1,`unknown_${f}`))}return t.name}function g(e){const t=_(e),{sid:n,named:r}=t.meta;return Boolean(!n&&("finally"===r||"done"===r||"doneData"===r||"fail"===r||"failData"===r||"inFlight"===r||"pending"===r))}function h(e){if(r.default.is.store(e,{sid:"4o7s04"}))return"store";if(r.default.is.effect(e,{sid:"4pv5s7"})||g(e))return"effect";if(r.default.is.event(e,{sid:"4rijka"}))return"event";if(r.default.is.domain(e,{sid:"54plsy"}))return"domain";if(r.default.is.unit(e))return"unit";const t=_(e);return t.meta.op?t.meta.op:"unknown"}o.registerScope=function(e,t){return p.save(e,{name:t.name}),c.forEach((t=>t(e))),()=>{p.delete(e)}},o.unregisterAllScopes=function(){p.clear()};const b=e=>e.graphite||e,v=new Map;function k(e){const t=v.get(b(e).id);if(t)return t;if(g(e)){const t=_(e),n=t.family.owners.find((e=>"effect"===e.meta.op));if(n){const e=w(n);return`${e?`${e}/`:""}${k(n)}.${t.meta.named}`}return t.meta.named}if(function(e){const t=_(e),{op:n}=t.meta;return"on"===n}(e)){const t=_(e);return`${k(t.next[0])}.on(${k(t.family.owners[0])})`}if(r.default.is.unit(e)){if(e?.compositeName?.fullName)return e.compositeName.fullName;const t=w(e),n=t?`${t}/`:"";if(e?.shortName)return`${n}${e.shortName}`;if(e?.name)return`${n}${e.name}`}return _(e)?.meta?.name?_(e).meta.name:null}function w(e){const t=_(e).family.owners.find((e=>"domain"===e.meta.op));return t?k(t):null}function j(e){const t=function({meta:e}){return"config"in e?e.config.loc:e.loc}(_(e));if(t)return t}function _(e){return"graphite"in e?e.graphite:e}function $(e){if(!e)return{};return e.meta||{}}})),c=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.delay=function(...e){const t=2===e.length?{source:e[0],timeout:e[1]}:e[0],{source:n,timeout:o,target:a=(0,r.default.createEvent)({name:"target",sid:"jucb8d"})}=t,i=Array.isArray(a)?a:[a];if(!r.default.is.unit(n))throw new TypeError("source must be a unit from effector");if(!i.every((e=>r.default.is.unit(e))))throw new TypeError("target must be a unit from effector");const s=function(e){if(r.default.is.store(e,{sid:"-tvk3f2"})||"function"==typeof e||"number"==typeof e)return e;throw new TypeError(`'timeout' argument must be a function, Store, or a number. Passed "${typeof e}"`)}(o),u=(0,r.default.createEffect)((({payload:e,milliseconds:t})=>new Promise((n=>{setTimeout(n,t,e)}))),{name:"timerFx",sid:"-wp3hwr"});return(0,r.default.sample)({and:[{source:(0,r.default.combine)({and:[{milliseconds:s}],or:{name:"source",sid:"-gaikyz"}}),clock:n,fn:({milliseconds:e},t)=>({payload:t,milliseconds:"function"==typeof e?e(t):e}),target:u}],or:{sid:"-uuqxfw"}}),(0,r.default.sample)({and:[{clock:u.doneData,target:i}],or:{sid:"-uc1x9m"}}),a}})),l=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.either=function e(t,n,o){if(r.default.is.store(t,{sid:"ozzvoc"}))return(0,r.default.combine)({and:[t,n,o,(e,t,n)=>e?t:n,{skipVoid:!1}],or:{sid:"-5vau2h"}});const a=t;return e(a.filter,a.then,a.other)}})),f=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.empty=function(e){return e.map((e=>null==e),{skipVoid:!1})}})),m=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.equals=function(e,t){return(0,r.default.combine)({and:[e,t,(e,t)=>e===t,{skipVoid:!1}],or:{sid:"-pqjlti"}})}})),p=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.every=function(e,t){let n,o=[],a=()=>!1;Array.isArray(e)?(o=e,a=t):Array.isArray(e.stores)&&(o=e.stores,a=e.predicate);i=a,n="function"==typeof i?a:r.default.is.store(a,{sid:"sid3ut"})?a.map((e=>t=>e===t),{skipVoid:!1}):e=>e===a;var i;const s=(0,r.default.combine)({and:[o],or:{name:"$values",sid:"rwb5jx"}}),u=n;return(0,r.default.combine)({and:[u,s,(e,t)=>t.every(e),{skipVoid:!1}],or:{sid:"hgnz2z"}})}})),y=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.format=function(e,...t){return(0,r.default.combine)({and:[t,t=>e.reduce(((n,r,o)=>n.concat(function(e,t){return t===e.length-1}(e,o)?r:`${r}${function(e){if(Array.isArray(e))return e.map((e=>String(e))).join(", ");return String(e)}(t[o])}`)),""),{skipVoid:!1}],or:{sid:"-yrbthp"}})}})),g=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.inFlight=function(e){const t=Array.isArray(e)?{effects:e}:e,{effects:n,domain:o}=t;if(o){const e=o.createStore(0,{name:"$inFlight",sid:"-wboyn1"});return o.onCreateEffect((t=>{e.on(t,(e=>e+1)).on(t.finally,(e=>e-1))})),e}return(0,r.default.combine)({and:[n.map((e=>e.inFlight)),e=>e.reduce(((e,t)=>e+t),0),{skipVoid:!1}],or:{sid:"udy3nn"}})}})),h=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.interval=function({timeout:e,start:t,stop:n,leading:o=!1,trailing:a=!1}){const i=(0,r.default.createEvent)({name:"setup",sid:"-ajee8b"});t&&(0,r.default.sample)({and:[{clock:t,target:i}],or:{sid:"-wq30tc"}});const s=(0,r.default.createEvent)({name:"teardown",sid:"-on6wf8"});n&&(0,r.default.sample)({and:[{clock:n,target:s}],or:{sid:"-wloo2g"}});const u=(0,r.default.createEvent)({name:"tick",sid:"37avek"}),d=(0,r.default.createStore)(!1,{name:"$isRunning",sid:"amqfro"}),c=function(e){if(r.default.is.store(e,{sid:"90rxd3"}))return e;if("number"==typeof e)return(0,r.default.createStore)(e,{and:{name:"$timeout"},sid:"-3ibdj9"});throw new TypeError(`timeout parameter in interval method should be number or Store. "${typeof e}" was passed`)}(e),l=d.map((e=>!e),{skipVoid:!1}),f=(0,r.default.createEvent)({name:"saveTimeout",sid:"-goth3o"}),m=(0,r.default.createStore)(null,{name:"$timeoutId",sid:"xi134t"}).on(f,((e,{timeoutId:t})=>t)),p=(0,r.default.createStore)((()=>{}),{name:"$rejecter",sid:"-2am6sk"}).on(f,((e,{reject:t})=>t)),y=(0,r.default.attach)({and:{source:{timeout:c,running:d},effect:({timeout:e,running:t})=>t?new Promise(((t,n)=>{const r=setTimeout(t,e);f({timeoutId:r,reject:n})})):Promise.reject()},or:{name:"timeoutFx",sid:"-hiem3q"}}),g=(0,r.default.attach)({and:{source:{timeoutId:m,rejecter:p},effect:({timeoutId:e,rejecter:t})=>{t(),e&&clearTimeout(e)}},or:{name:"cleanupFx",sid:"d148gq"}});if((0,r.default.sample)({and:[{clock:i,source:c,filter:l,target:y}],or:{sid:"-u9k5bx"}}),o){const e=(0,r.default.sample)({and:[{clock:i,filter:l}],or:{name:"onReady",sid:"5o8c6v"}});(0,r.default.sample)({and:[{clock:e,target:u}],or:{sid:"6njtce"}})}(0,r.default.sample)({and:[{clock:i,fn:()=>!0,target:d}],or:{sid:"6p772r"}}),(0,r.default.sample)({and:[{clock:y.done,source:c,filter:d,target:y}],or:{sid:"741n3i"}}),(0,r.default.sample)({and:[{clock:y.done,filter:d,target:u.prepend((()=>{}))}],or:{sid:"7jfvpm"}}),a&&(0,r.default.sample)({and:[{clock:s,target:u}],or:{sid:"7zxpk6"}});return d.on(s,(()=>!1)),(0,r.default.sample)({and:[{clock:s,target:g}],or:{sid:"84c29c"}}),{tick:u,isRunning:d,"@@trigger":()=>({setup:i,teardown:s,fired:u})}}})),b=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.not=function(e){return e.map((e=>!e),{skipVoid:!1})}})),v=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.once=function(e){let t,n;r.default.is.unit(e)?t=e:({source:t,reset:n}=e);const o=(0,r.default.createStore)(!0,{name:"$canTrigger",sid:"ys2jl0"}),a=(0,r.default.sample)({and:[{source:t,filter:o}],or:{name:"trigger",sid:"e3xto3"}});o.on(a,(()=>!1)),n&&o.reset(n);return a}})),k=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=function(...e){return(0,r.default.combine)({and:[e,e=>{for(const t of e)if(t)return!0;return!1},{skipVoid:!1}],or:{sid:"-44722k"}})}})),w=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pending=function(e){const t=Array.isArray(e)?{effects:e}:e,{effects:o,domain:a,of:i="some"}=t;if(!r.default.is.domain(a,{sid:"98ymuf"})&&!o)throw new TypeError("domain or effects should be passed");if("some"!==i&&"every"!==i)throw new TypeError(`strategy parameter "of" can be "every" or "some". Passed: "${i}"`);let s=null!=o?o:[];const u=n[i];a&&(s=[],a.onCreateEffect((e=>s.push(e))));return(0,r.default.combine)({and:[s.map((e=>e.pending)),u,{skipVoid:!1}],or:{sid:"a4upb3"}})};const n={some:e=>e.some(Boolean),every:e=>e.every(Boolean)}})),j=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.previous=function(...e){const[t]=e,n=e.length<2?null:e[1];if(!r.default.is.store(t,{sid:"mzq5dc"}))throw Error("previous first argument should be a store");const o=(0,r.default.createStore)(n,{and:{serialize:"ignore",skipVoid:!1},name:"$prevValue",sid:"e05yob"});return t.graphite.seq.push(r.default.step.compute({fn:(e,t,n)=>((0,r.default.launch)({target:o,params:n.a,defer:!0}),e)})),o}})),_=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.readonly=function(e){if(!r.default.is.targetable(e))return e;if(r.default.is.store(e,{sid:"-kqkmsc"}))return e.map((e=>e),{skipVoid:!1});if(r.default.is.event(e,{sid:"-kodgew"}))return e.map((e=>e));return e}})),$=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function({clock:e,target:t}){const n=Array.isArray(t)?t:[t],o=Array.isArray(e)?e:[null!=e?e:(0,r.default.createEvent)({name:"clocks",sid:"bqmea5"})];return n.forEach((e=>{e.reset(o)})),void 0===e?o[0]:void 0}})),E=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.reshape=function({source:e,shape:t}){const n={};for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const o=t[r];n[r]=e.map((e=>{const t=o(e);return void 0===t?null:t}),{skipVoid:!1})}return n}})),M=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.snapshot=function({source:e,clock:t,fn:n=(e=>e)}){const o=n(e.defaultState),a=t?(0,r.default.sample)({and:[{source:e,clock:t,fn:n}],or:{name:"onSnapshot",sid:"-imuiws"}}):(0,r.default.sample)({and:[{source:e,fn:n}],or:{name:"onSnapshot",sid:"-imaqbf"}}),i=(0,r.default.createStore)(o,{name:"$snapshot",sid:"-63s6pn"});return i.on(a,((e,t)=>t)),i}})),O=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.some=function(e,t){let n,o=[],a=()=>!1;Array.isArray(e)?(o=e,a=t):Array.isArray(e.stores)&&(o=e.stores,a=e.predicate);i=a,n="function"==typeof i?a:r.default.is.store(a,{sid:"zbwu0l"})?a.map((e=>t=>e===t),{skipVoid:!1}):e=>e===a;var i;const s=(0,r.default.combine)({and:[o],or:{name:"$values",sid:"-kx24vm"}}),u=n;return(0,r.default.combine)({and:[u,s,(e,t)=>t.some(e),{skipVoid:!1}],or:{sid:"-ee8kph"}})}})),P=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.splitMap=function({source:e,cases:t}){const n={};let o=r.default.is.store(e,{name:"current",sid:"-htjkz7"})?e.updates:e;for(const e in t)if(e in t){const r=t[e];n[e]=o.filterMap(r),o=o.filter({fn:e=>!r(e)})}return n.__=o,n}})),S=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.spread=function(e){const t=function(e){return Object.keys(e).some((t=>!["targets","source"].includes(t)&&r.default.is.unit(e[t])))}(e)?{targets:e}:e,{targets:o,source:a=(0,r.default.createEvent)({name:"source",sid:"e9ipnn"})}=t;for(const e in o)if(i=o,s=e,n.call(i,s)){const t=o[e],n=(0,r.default.sample)({and:[{source:a,batch:!1,filter:t=>"object"==typeof t&&null!==t&&e in t}],or:{name:"hasTargetKey",sid:"eapc0z"}});(0,r.default.sample)({and:[{batch:!1,clock:n,fn:t=>t[e],target:t}],or:{sid:"mkzcy4"}})}var i,s;return a};const n={}.hasOwnProperty})),T=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.status=function(e){const{effect:t,defaultValue:n="initial"}=r.default.is.effect(e,{sid:"cn6w5b"})?{effect:e}:e,o=(0,r.default.createStore)(n,{name:"$status",sid:"ph7d4u"});if(!r.default.is.effect(t,{sid:"-kp39vu"}))throw TypeError('status: "effect" property is not an effect');return o.on(t,(()=>"pending")).on(t.done,(()=>"done")).on(t.fail,(()=>"fail")),o}})),x=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(...e){const t=2===e.length?{source:e[0],timeout:e[1]}:e[0],{source:n,timeout:o,target:a=(0,r.default.createEvent)({name:"target",sid:"-gyhb56"})}=t;if(!r.default.is.unit(n))throw new TypeError("source must be unit from effector");const i=function(e){if(r.default.is.store(e,{sid:"-gj92sk"}))return e;if("number"==typeof e){if(e<0||!Number.isFinite(e))throw new Error(`timeout must be positive number or zero. Received: "${e}"`);return(0,r.default.createStore)(e,{and:{name:"$timeout"},sid:"-2ktcsz"})}throw new TypeError(`timeout parameter should be number or Store. "${typeof e}" was passed`)}(o),s=(0,r.default.createEffect)({name:`throttle(${n.shortName||n.kind}) effect`,handler:e=>new Promise((t=>setTimeout(t,e)))},{name:"timerFx",sid:"-lp5bot"}),u=(0,r.default.createStore)(null,{and:{serialize:"ignore",skipVoid:!1},name:"$payload",sid:"w71tnu"}).on(n,((e,t)=>t)),d=(0,r.default.createEvent)({name:"triggerTick",sid:"-dquigt"}),c=(0,r.default.createStore)(!0,{and:{serialize:"ignore"},name:"$canTick",sid:"e2dxhp"}).on(d,(()=>!1)).on(a,(()=>!0));return(0,r.default.sample)({and:[{clock:n,filter:c,target:d}],or:{sid:"-hifwv4"}}),(0,r.default.sample)({and:[{source:i,clock:d,target:s}],or:{sid:"-h3lgud"}}),(0,r.default.sample)({and:[{source:u,clock:s.done,target:a}],or:{sid:"-h0apa7"}}),a}})),q=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.time=function(e){const t=r.default.is.unit(e)?{clock:e}:e,{clock:o,getNow:a,initial:i}=t,s=null!=a?a:n,u=(0,r.default.createEffect)(s,{name:"readNowFx",sid:"ito90c"}),d=(0,r.default.restore)(u,null!=i?i:s(),{name:"$time",sid:"-k3vl4d"});return(0,r.default.sample)({and:[{clock:o,target:u}],or:{sid:"rul0o2"}}),d};const n=()=>Date.now()})),A=a.and,z=i.combineEvents,V=s.condition,N=u.debounce,F=d.debug,C=c.delay,D=l.either,I=f.empty,R=m.equals,B=p.every,K=y.format,G=g.inFlight,H=h.interval,J=b.not,L=v.once,Q=k.or,U=w.pending,W=j.previous,X=_.readonly,Y=$.reset,Z=E.reshape,ee=M.snapshot,te=O.some,ne=P.splitMap,re=S.spread,oe=T.status,ae=x.throttle,ie=q.time,se={and:A,combineEvents:z,condition:V,debounce:N,debug:F,delay:C,either:D,empty:I,equals:R,every:B,format:K,inFlight:G,interval:H,not:J,once:L,or:Q,pending:U,previous:W,readonly:X,reset:Y,reshape:Z,snapshot:ee,some:te,splitMap:ne,spread:re,status:oe,throttle:ae,time:ie};e.and=A,e.combineEvents=z,e.condition=V,e.debounce=N,e.debug=F,e.default=se,e.delay=C,e.either=D,e.empty=I,e.equals=R,e.every=B,e.format=K,e.inFlight=G,e.interval=H,e.not=J,e.once=L,e.or=Q,e.pending=U,e.previous=W,e.readonly=X,e.reset=Y,e.reshape=Z,e.snapshot=ee,e.some=te,e.splitMap=ne,e.spread=re,e.status=oe,e.throttle=ae,e.time=ie,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=patronum.umd.js.map

"use strict";function e({storage:e,sync:t=!1,serialize:r=JSON.stringify,deserialize:n=JSON.parse,timeout:i,def:o}){var a=(a,d)=>{var s,u,v,f=()=>v.setItem(a,r(u)),l=e=>{s=clearTimeout(s),e&&f(),"undefined"!=typeof removeEventListener&&removeEventListener("beforeunload",l)};return t&&"undefined"!=typeof addEventListener&&addEventListener("storage",(r=>{r.storageArea===e()&&(r.key===a&&d("force"===t?void 0:r.newValue),null===r.key&&d(null))})),{get(t){l();var r=void 0!==t?t:e().getItem(a);return null===r?void 0!==o?o:t:n(r)},set(t){u=t,v=e(),void 0===i?f():s||(s=setTimeout(l,i,1),"undefined"!=typeof addEventListener&&addEventListener("beforeunload",l))}}};try{a.keyArea=e()}catch(e){}return a}e.factory=!0,exports.storage=e;
//# sourceMappingURL=index.cjs.map

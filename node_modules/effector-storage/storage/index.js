function e({storage:e,sync:t=!1,serialize:r=JSON.stringify,deserialize:n=JSON.parse,timeout:i,def:o}){var d=(d,a)=>{var s,u,v,f=()=>v.setItem(d,r(u)),l=e=>{s=clearTimeout(s),e&&f(),"undefined"!=typeof removeEventListener&&removeEventListener("beforeunload",l)};return t&&"undefined"!=typeof addEventListener&&addEventListener("storage",(r=>{r.storageArea===e()&&(r.key===d&&a("force"===t?void 0:r.newValue),null===r.key&&a(null))})),{get(t){l();var r=void 0!==t?t:e().getItem(d);return null===r?void 0!==o?o:t:n(r)},set(t){u=t,v=e(),void 0===i?f():s||(s=setTimeout(l,i,1),"undefined"!=typeof addEventListener&&addEventListener("beforeunload",l))}}};try{d.keyArea=e()}catch(e){}return d}e.factory=!0;export{e as storage};
//# sourceMappingURL=index.js.map

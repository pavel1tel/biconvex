"use strict";var e,t,r=require("../core/index.cjs"),a=require("../nil/index.cjs"),o=Symbol(),i=new Map,s=e=>location.pathname+(e+""?"?"+e:"")+(location.hash&&"#"!==location.hash?location.hash:""),n=(e,t)=>history.pushState(t?null:history.state,"",s(e));function c(e,r){if(t=void 0,i.size){var a=new URLSearchParams(location.search);for(var[o,s]of i.entries())null!=s?a.set(o,`${s}`):a.delete(o);i.clear(),e(a,"erase"===r)}}function l(r){return"undefined"!=typeof history&&"undefined"!=typeof location?function({method:r=n,state:a,serialize:s,deserialize:l,def:u=null,timeout:p}){var d=(o,n)=>("undefined"!=typeof addEventListener&&addEventListener("popstate",(()=>setTimeout(n,0))),{get(){var e=new URLSearchParams(location.search).get(o);return e?l?l(e):e:u},set(n){if(i.set(o,s?s(n):n),void 0===p)return clearTimeout(e),c(r,a);var l=Date.now()+p;(void 0===t||t>l)&&(clearTimeout(e),t=l,e=setTimeout(c,p,r,a))}});return d.keyArea=o,d}({...r}):a.nil({keyArea:"query"})}function u(e){return t=>r.persist({adapter:l,...e,...t})}l.factory=!0;var p=u();exports.createPersist=u,exports.locationAssign=e=>location.assign(s(e)),exports.locationReplace=e=>location.replace(s(e)),exports.persist=p,exports.pushState=n,exports.query=l,exports.replaceState=(e,t)=>history.replaceState(t?null:history.state,"",s(e));
//# sourceMappingURL=index.cjs.map
